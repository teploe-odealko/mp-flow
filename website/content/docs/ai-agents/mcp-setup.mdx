---
title: Подключение MCP сервера
description: Настройка MCP подключения к OpenMPFlow для Claude Desktop, ChatGPT, Cursor и других AI-клиентов
---

OpenMPFlow предоставляет **54 MCP инструмента** через [Model Context Protocol](https://modelcontextprotocol.io/). Любой MCP-совместимый клиент может подключиться.

## 1. Создайте API-ключ

1. Откройте Admin UI
2. Перейдите в раздел **MCP** (в боковом меню)
3. Создайте новый API-ключ
4. Скопируйте ключ (начинается с `mpk_`)

<Callout type="warn">
Ключ показывается только один раз. Сохраните его в надёжном месте.
</Callout>

## 2. Подключите AI-клиент

### Claude Desktop / Claude Code

Добавьте в `claude_desktop_config.json`:

```json title="claude_desktop_config.json"
{
  "mcpServers": {
    "openmpflow": {
      "url": "https://proxy.mp-flow.ru/mcp",
      "headers": {
        "Authorization": "Bearer mpk_your_api_key_here"
      }
    }
  }
}
```

### ChatGPT

ChatGPT использует OAuth авторизацию автоматически при подключении через настройки MCP.

### Cursor / Windsurf

Аналогично Claude Desktop — добавьте MCP сервер в настройки с API-ключом.

### Локальная разработка

Для подключения к локальному инстансу:

```json title="claude_desktop_config.json"
{
  "mcpServers": {
    "openmpflow-local": {
      "url": "http://localhost:8000/mcp",
      "headers": {
        "Authorization": "Bearer mpk_your_api_key_here"
      }
    }
  }
}
```

## Транспорт

OpenMPFlow использует **Streamable HTTP** транспорт — стандартный MCP транспорт для веб-серверов. Endpoint: `/mcp`.

## Аутентификация

Два метода:

| Метод | Использование |
|-------|---------------|
| **API-ключи** (`mpk_`) | Claude, Cursor, Manus и другие клиенты с поддержкой заголовков |
| **OAuth** | ChatGPT и OAuth-совместимые клиенты |

### OAuth endpoints

Для клиентов с поддержкой OAuth:

- Авторизация: `https://proxy.mp-flow.ru/oauth/authorize`
- Токен: `https://proxy.mp-flow.ru/oauth/token`
- Регистрация: `https://proxy.mp-flow.ru/oauth/register` (RFC 7591 DCR)

## Проверка подключения

После настройки попросите агента:

> «Покажи текущее состояние системы»

Агент вызовет `meta_current_state` и покажет информацию о вашем аккаунте, количестве товаров и настройках.

## API Reference

Интерактивная документация API: [proxy.mp-flow.ru/docs](https://proxy.mp-flow.ru/docs)
