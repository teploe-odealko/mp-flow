---
title: Переменные окружения
description: Все переменные окружения OpenMPFlow — база данных, безопасность, Ozon API, AI, OAuth
---

## Конфигурация через .env

Все настройки задаются через переменные окружения в файле `.env`.

```bash
cp .env.example .env
```

## Обязательные

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `POSTGRES_PASSWORD` | Пароль PostgreSQL | `mpflow_dev_2026` |
| `HMAC_SECRET` | Секрет для подписи токенов аутентификации | — |
| `ADMIN_BOOTSTRAP_USERNAME` | Логин администратора (создаётся при первом запуске) | `admin` |
| `ADMIN_BOOTSTRAP_PASSWORD` | Пароль администратора | `change-me` |

<Callout type="warn">
`HMAC_SECRET` обязательно сгенерируйте для продакшена: `openssl rand -base64 32`
</Callout>

## Ozon Seller API

| Переменная | Описание |
|------------|----------|
| `OZON_CLIENT_ID` | Client-ID из [кабинета продавца](https://seller.ozon.ru/app/settings/api-keys) |
| `OZON_API_KEY` | API-ключ Ozon |

## Плагины

| Переменная | Описание |
|------------|----------|
| `TMAPI_API_TOKEN` | Токен [tmapi.top](https://tmapi.top) для плагина ali1688 |

## AI функции

| Переменная | Описание |
|------------|----------|
| `ANTHROPIC_API_KEY` | API-ключ Anthropic (для генерации изображений) |

## OAuth / Logto

| Переменная | Описание |
|------------|----------|
| `BASE_URL` | Публичный URL прокси (например, `https://proxy.mp-flow.ru`) |
| `LOGTO_ENDPOINT` | URL инстанса Logto |
| `LOGTO_API_RESOURCE` | API resource для валидации JWT |
| `LOGTO_MCP_CLIENT_ID` | Client ID для MCP OAuth потока |

<Callout type="info">
Logto нужен только для OAuth-авторизации MCP клиентов (ChatGPT). Без Logto система работает с API-ключами и логином/паролем.
</Callout>

## Генерация секретов

```bash
# HMAC секрет
openssl rand -base64 32

# Пароль PostgreSQL
openssl rand -hex 16
```
