---
title: Планирование закупок
description: Автоматическое планирование закупок в OpenMPFlow — прогноз спроса, кластеры товаров, корректировка плана
---

## Планирование закупок

OpenMPFlow анализирует продажи и формирует план закупок с учётом сроков поставки и буферного запаса.

## Как работает

### Генерация плана

Система анализирует историю продаж и рассчитывает:

1. **Средний спрос** — дневные продажи за период
2. **Запас на lead time** — сколько нужно товара на время доставки от поставщика
3. **Буферный запас** — дополнительный запас на случай задержек
4. **Текущие остатки** — что уже есть на складе и в пути
5. **К закупке** = Запас на lead time + Буфер − Текущие остатки

### Параметры

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| `lead_time_days` | Срок доставки от поставщика (дни) | 45 |
| `buffer_days` | Буферный запас (дни продаж) | 60 |

### Кластеры товаров

Товары можно группировать в кластеры с разными параметрами планирования. Например:
- **Быстрые товары** — lead time 30 дней, буфер 45 дней
- **Медленные товары** — lead time 60 дней, буфер 90 дней

## Жизненный цикл плана

1. **Генерация** — система создаёт черновик плана
2. **Корректировка** — вы проверяете и при необходимости меняете количества
3. **Подтверждение** — план фиксируется, можно создавать заказы поставщикам

## MCP инструменты

| Инструмент | Описание |
|------------|----------|
| `demand_generate_plan` | Генерация нового плана закупок |
| `demand_list_plans` | Список планов |
| `demand_get_plan` | Детали плана |
| `demand_adjust_item` | Корректировка количества в плане |
| `demand_confirm_plan` | Подтверждение плана |
| `demand_get_params` | Параметры планирования |
| `demand_set_params` | Установка параметров для SKU |
| `demand_get_cluster_targets` | Кластеры товаров |
| `demand_set_cluster_target` | Настройка кластера |
